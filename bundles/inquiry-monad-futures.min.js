!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i(require("Inquiry"),require("Future")):"function"==typeof define&&define.amd?define("InquiryMonadFutures",["Inquiry","Future"],i):"object"==typeof exports?exports.InquiryMonadFutures=i(require("Inquiry"),require("Future")):e.InquiryMonadFutures=i(e.Inquiry,e.Future)}(window,function(e,i){return function(e){var i={};function n(o){if(i[o])return i[o].exports;var t=i[o]={i:o,l:!1,exports:{}};return e[o].call(t.exports,t,t.exports,n),t.l=!0,t.exports}return n.m=e,n.c=i,n.d=function(e,i,o){n.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(i,"a",i),i},n.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},n.p="",n(n.s=4)}([function(e,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.$$inquirySymbol=Symbol(),i.$$questionsetSymbol=Symbol(),i.$$questionSymbol=Symbol(),i.$$passSymbol=Symbol(),i.$$failSymbol=Symbol(),i.$$iouSymbol=Symbol(),i.$$receiptSymbol=Symbol()},function(i,n){i.exports=e},function(e,n){e.exports=i},function(e,i){const n=e=>({isJust:!0,isNothing:!1,inspect:i=>`Just(${e})`,map:i=>t.of(i(e)),ap:i=>i.map(e),chain:i=>i(e),join:i=>e,fork:(i,n)=>n(e),sequence:i=>e.map(t.of)}),o=e=>({isJust:!1,isNothing:!0,inspect:e=>"Nothing",map:e=>o(),ap:e=>o(),chain:e=>o(),join:e=>o(),fork:(e,i)=>e(),sequence:e=>e(o())}),t={of:e=>null===e||void 0===e?o():n(e)};e.exports={Maybe:t,Nothing:o,Just:n}},function(e,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const o=n(3),t=n(2);i.Future=t.Future;const s=n(1);i.Pass=s.Pass,i.Fail=s.Fail,i.IOU=s.IOU,i.Questionset=s.Questionset,i.Question=s.Question,i.Receipt=s.Receipt;const u=n(0);i.$$inquirySymbol=u.$$inquirySymbol;const r=()=>{},a=e=>i=>i.reduce((e,i)=>i[1].answer(e,"(async fn)",c),e),l=e=>e.iou.join().map(e=>e.extract()().chain(i=>t.Future.of([e.name(),i]))),p=e=>e[u.$$inquirySymbol]?e:c({subject:o.Maybe.of(e),fail:s.Fail([]),pass:s.Pass([]),iou:s.IOU([]),informant:e=>e,questionset:s.Questionset.of([["",r]]),receipt:s.Receipt([])}),c=e=>({inquire:i=>{const n="function"==typeof i?i.name||"anon":(e=>e[u.$$questionSymbol]?e.name():e)(i),o=i[u.$$questionSymbol]?i.extract():i,r="function"==typeof o?o:e.questionset.find(o),a="function"==typeof r?r(e.subject.join()):{},l=a instanceof t.Future&&s.Question.of([n,()=>a]);return l?c({subject:e.subject,fail:e.fail,pass:e.pass,iou:e.iou.concat(s.IOU([l])),informant:e.informant,questionset:e.questionset,receipt:e.receipt}):(i=>i[u.$$failSymbol]||i[u.$$passSymbol]||i[u.$$inquirySymbol]?i.answer(e,n,c):(i=>(console.warn("inquire was passed a function that does not return Pass or Fail:",n),console.warn("response was:",i),c(e)))([a,n]))(a)},inquireMap:(i,n)=>n.reduce((n,o)=>{const r="function"==typeof i?i.name||"anon":(e=>e[u.$$questionSymbol]?e.name():e)(i),a=i[u.$$questionSymbol]?i.extract():i,l="function"==typeof a?a:e.questionset.find(a),p="function"==typeof l?l(o)(n.join().subject.join()):{};return p instanceof t.Future?c({subject:n.join().subject,fail:n.join().fail,pass:n.join().pass,iou:n.join().iou.concat(s.IOU([p])),informant:n.join().informant,questionset:n.join().questionset,receipt:n.join().receipt}):(i=>i[u.$$failSymbol]||i[u.$$passSymbol]||i[u.$$inquirySymbol]?i.answer(n.join(),r,c):s.Pass(i).answer(e,r,c))(p)},c({subject:e.subject,iou:e.iou,fail:e.fail,pass:e.pass,informant:e.informant,questionset:e.questionset,receipt:e.receipt})),inquireAll:()=>e.questionset.chain(i=>i.reduce((e,i)=>e.inquire(s.Question.of(i)),c(e))),using:i=>c({subject:e.subject,iou:e.iou,fail:e.fail,pass:e.pass,informant:e.informant,questionset:i,receipt:e.receipt}),informant:i=>c({subject:e.subject,iou:e.iou,fail:e.fail,pass:e.pass,informant:i,questionset:e.questionset,receipt:e.receipt}),inspect:()=>`InquiryF(${e.fail.inspect()} ${e.pass.inspect()} ${e.iou.inspect()}`,swap:()=>c({subject:e.subject,iou:e.iou,fail:s.Fail(e.pass.join()),pass:s.Pass(e.fail.join()),informant:e.informant,questionset:e.questionset,receipt:e.receipt}),unison:i=>c({subject:e.subject,iou:e.iou,fail:s.Fail(i(e.fail.join())),pass:s.Pass(i(e.pass.join())),informant:e.informant,questionset:e.questionset,receipt:e.receipt}),map:i=>p(i(e)),ap:i=>i.map(e),chain:i=>i(e),join:()=>e,breakpoint:i=>e.fail.join().length?i(e):c(e),milestone:i=>e.pass.join().length?i(e):c(e),answer:(i,n,o)=>(i.informant([n,c(e)]),c({subject:i.subject,iou:i.iou,fail:i.fail.concat(e.fail),pass:i.pass.concat(e.pass),informant:i.informant,questionset:i.questionset,receipt:i.receipt})),conclude:(i,n)=>t.Future.parallel(1/0,e.iou.join()).map(a(e)).map(e=>e[u.$$inquirySymbol]?e.join():e).fork(console.error,e=>({subject:e.subject,iou:e.iou,fail:i(e.fail),pass:n(e.pass),informant:e.informant,questionset:e.questionset,receipt:e.receipt})),cleared:i=>t.Future.parallel(1/0,e.iou.join()).map(a(e)).map(e=>u.$$inquirySymbol in e?e.join():e).fork(console.error,e=>e.fail.isEmpty()?i(e.pass):c(e)),faulted:i=>t.Future.parallel(1/0,l(e)).map(a(e)).map(e=>u.$$inquirySymbol in e?e.join():e).fork(console.error,e=>e.fail.isEmpty()?c(e):i(e.fail)),suffice:i=>t.Future.parallel(1/0,l(e)).map(a(e)).map(e=>u.$$inquirySymbol in e?e.join():e).fork(console.error,e=>e.pass.isEmpty()?c(e):i(e.pass)),scratch:i=>t.Future.parallel(1/0,l(e)).map(a(e)).map(e=>u.$$inquirySymbol in e?e.join():e).fork(console.error,e=>e.pass.isEmpty()?i(e.fail):c(e)),fork:(i,n)=>t.Future.parallel(1/0,l(e)).map(a(e)).map(e=>u.$$inquirySymbol in e?e.join():e).fork(console.error,e=>e.fail.join().length?i(e.fail):n(e.pass)),fold:(i,n)=>t.Future.parallel(1/0,l(e)).map(a(e)).map(e=>u.$$inquirySymbol in e?e.join():e).fork(console.error,e=>e.pass.join().length?i(e.pass):n(e.fail)),zip:i=>t.Future.parallel(1/0,l(e)).map(a(e)).map(e=>u.$$inquirySymbol in e?e.join():e).fork(console.error,e=>i(e.fail.join().concat(e.pass.join()))),promise:()=>t.Future.parallel(1/0,l(e)).map(a(e)).promise(),[u.$$inquirySymbol]:!0}),f={subject:p,of:e=>"subject"in e&&"fail"in e&&"pass"in e&&"iou"in e&&"informant"in e&&"questionset"in e&&"receipt"in e?c(e):(e=>(console.warn("InquiryF.of requires properties: subject, fail, pass, iou, informant, questionset, receipt. Converting to InquiryF.subject()."),p(e)))(e)};i.InquiryF=f}])});
//# sourceMappingURL=inquiry-monad-futures.min.js.map